{"config":{"lang":["no"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Index","text":""},{"location":"#release-operate-report","title":"Release Operate Report","text":"<p>ROR is a multi cluster management tool aimed to streamline the process of creating kubernetes clusters on any provider or architecture. ROR is developed by Norsk Helsenett SF but we move to remove any references and internal logic related to the organization. Our aim is to release the project as an open source project.</p>"},{"location":"#philosophy","title":"Philosophy","text":"<p>For our philosophy on ror see here</p>"},{"location":"#features","title":"Features","text":"<p>For coming features, checkout the roadmap here</p>"},{"location":"getting-started/","title":"Getting started with ROR development","text":""},{"location":"getting-started/#getting-started-with-ror-development","title":"Getting started with ROR development","text":""},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker</li> <li>Go</li> </ul>"},{"location":"getting-started/#starting-ror","title":"Starting ROR","text":""},{"location":"getting-started/#ror-api","title":"ROR-API","text":"<p>Clone the ror-api repositiroy and run</p> <pre><code>git clone https://github.com/NorskHelsenett/ror-api\ncp .env.example .env\ndocker compose up -d\ngo run cmd/api/main.go\n</code></pre>"},{"location":"getting-started/#ror-web","title":"ROR WEB","text":"<p>Clone the ror-webapp repository</p> <pre><code>git clone https://github.com/NorskHelsenett/ror-webapp\nnpm i\nnmp start\n</code></pre> <p>Point your browser to http://localhost:11000</p>"},{"location":"getting-started/#login-to-ror-web","title":"Login to ROR-web","text":"<p>Open your favorite browser, and go to http://localhost:11000 Log in with any of these accounts:</p> Title Username Password super admin <code>superadmin@ror.dev</code> <code>S3cret!</code> read only admin <code>readadmin@ror.dev</code> <code>S3cret!</code> developer 1 <code>dev1@ror.dev</code> <code>S3cret!</code> developer 2 <code>dev2@ror.dev</code> <code>S3cret!</code>"},{"location":"getting-started/#swagger","title":"Swagger","text":"<p>To see swagger for ROR Api, go to http://localhost:10000/swagger/index.html</p>"},{"location":"getting-started/#core-infrastructure","title":"Core infrastructure","text":"Service What Url ReadMe link Comment DEX Authentication www: http://localhost:5556, grpc api: http://localhost:5557 dex doc docker hub Reachable from inside and outside of docker Openldap Mocking users http://localhost:389 MongoDB Document database mongodb://localhost:27017 Mongo-Express Gui for document base http://localhost:8081 RabbitMQ Message bus GUI: http://localhost:15672, amqp port: localhost:5672 Vault Secrets handling GUI: http://localhost:8200 Valkey Cache GUI: http://localhost:6379"},{"location":"getting-started/#default-users","title":"Default users","text":"Service Username Password MongoDB <code>someone</code> <code>S3cret!</code> Mongo-Express <code>test</code> <code>S3cr3t</code> RabbitMQ <code>admin</code> <code>S3cret!</code>"},{"location":"getting-started/#optional-services","title":"Optional services","text":"Service What Url ReadMe link Comment jaeger opentelemetry-collector"},{"location":"getting-started/#ror-services","title":"ROR services","text":"Service What Url Port ReadMe link Comment ROR-Api Api http://localhost:10000 8080 ror-api ROR-WebApp Web http://localhost:11000 8090 ror-webapp ROR-Agent K8s Agent http://localhost:8100 8100 ror-agent Not run by docker-compose"},{"location":"getting-started/#known-issues","title":"Known issues","text":"<p>See Known-issues</p>"},{"location":"getting-started/#documentation","title":"Documentation","text":"<p>We pull documentation from code using some go package. Thus all functions should be annotated with a comment describing its use and any caveats. We keep system documentation in <code>cmd/docs/</code>, some files are copied in from .md files located in other parts of the repo using the <code>cmd/docs/collectdocs.sh</code> script. If you see any documentation that is out of date or wrong, please update it.</p>"},{"location":"introduction/","title":"Introduction","text":""},{"location":"philosophy/","title":"Philosophy","text":""},{"location":"philosophy/#philosophy","title":"Philosophy","text":""},{"location":"philosophy/#1-api-driven","title":"1. API Driven","text":"<p>ROR is API first and any functionality is to be available through the API.</p>"},{"location":"philosophy/#2-provider-agnostic-but-extensible","title":"2. Provider agnostic but extensible","text":"<p>ROR is to be provider agnostic but extensible through microservices or operators to convert provider specific resources to generic ROR resources.</p>"},{"location":"philosophy/#3-start-simple-then-extend","title":"3. Start simple then extend","text":"<p>Support simple primitives first then extend support if needed. Collect only needed data, scope the datamodel to suit our need.</p>"},{"location":"components/","title":"Components","text":""},{"location":"components/#components","title":"Components","text":""},{"location":"components/#clients","title":"Clients","text":""},{"location":"components/#ror-admin","title":"ror-admin","text":"<p>Webclient writen in angular.</p>"},{"location":"components/#ror-cli","title":"ror-cli","text":"<p>cli-client writen in golang.</p>"},{"location":"components/#core","title":"Core","text":""},{"location":"components/#ror-ap","title":"ror-ap","text":"<p>The main component of ror.</p>"},{"location":"components/#vault","title":"vault","text":"<p>Hashicorp vault, secretstorage and identity-manager for services in ROR</p>"},{"location":"components/#mongodb","title":"mongoDB","text":"<p>Database</p>"},{"location":"components/#ror-docs","title":"ror-docs","text":"<p>mkdocs, documentation in markdown.</p>"},{"location":"components/#microservices","title":"Microservices","text":""},{"location":"components/#ror-ms-nhn","title":"ror-ms-nhn","text":"<p>Microservice to do NHN spesific operations</p>"},{"location":"components/#ror-ms-auth","title":"ror-ms-auth","text":"<p>Microservice integrating dex</p>"},{"location":"components/#ror-ms-slack","title":"ror-ms-slack","text":"<p>Microservice integrating slack</p>"},{"location":"components/#distributables","title":"Distributables","text":""},{"location":"components/#ror-operator","title":"ror-operator","text":"<p>Low level cluster operator, bootstraping cluster integration and tooling.</p>"},{"location":"components/#ror-agent","title":"ror-agent","text":"<p>In-cluster datacollector</p>"},{"location":"components/clients/","title":"Index","text":""},{"location":"components/clients/ror-admin/","title":"ROR-Admin","text":""},{"location":"components/clients/ror-admin/#ror-admin","title":"ROR-Admin","text":""},{"location":"components/clients/rorclient/","title":"ROR Client","text":""},{"location":"components/clients/rorclient/#ror-client","title":"ROR Client","text":""},{"location":"components/clients/rorclient/getting-started/","title":"Getting started with ROR Client","text":""},{"location":"components/clients/rorclient/getting-started/#getting-started-with-ror-client","title":"Getting started with ROR Client","text":""},{"location":"components/clients/rorclient/getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>A ROR resourcedef - To create this see docs/ror-generator-client/docs/generator/getting-started.md</li> </ul>"},{"location":"components/clients/rorclient/getting-started/#optional","title":"Optional","text":"<ul> <li>TODO</li> </ul>"},{"location":"components/clients/rorclient/getting-started/#getting-started","title":"Getting started","text":""},{"location":"components/clients/rorclient/getting-started/#configuration-variables","title":"Configuration variables","text":"<p>First to implement it we need to add the rorclient to the project</p> <pre><code>go get \"github.com/NorskHelsenett/ror/pkg/clients/rorclient\"\n</code></pre> <p>And then add configuration variables for the following parameters:</p> <p><code>BaseUrl</code></p> <p>The Url of the ROR instance you're communicating with.</p> <p><code>AuthProvider</code></p> <p>The auth proivder from \"github.com/NorskHelsenett/ror/pkg/clients/rorclient/transports/resttransport/httpauthprovider\" which is either: httpauthprovider.NewNoAuthProvider() or an actual AuthProvider</p> <p>TODO</p> <p><code>Version</code></p> <p>The current version of the client, for example 0.0.1:</p> <p><code>Role</code></p> <p>The name of the client, for example vpshereAgent</p>"},{"location":"components/clients/rorclient/getting-started/#implementation","title":"Implementation","text":""},{"location":"components/clients/rorclient/getting-started/#implementing-the-ror-client","title":"Implementing the ROR client","text":"Example <pre><code>package rorclient\n\nimport (\n    \"github.com/NorskHelsenett/ror/pkg/clients/rorclient\"\n    \"github.com/NorskHelsenett/ror/pkg/clients/rorclient/transports/resttransport\"\n    \"github.com/NorskHelsenett/ror/pkg/clients/rorclient/transports/resttransport/httpauthprovider\"\n    \"github.com/NorskHelsenett/ror/pkg/clients/rorclient/transports/resttransport/httpclient\"\n    \"github.com/NorskHelsenett/ror/pkg/config/rorversion\"\n)\n\ntype config struct {\n    RorUrl string\n    RorRole string\n    RorCommit string\n    RorVersion string\n}\n\n// Populates the Config with values from environmental variables or static values \nfunc NewConfig() *Config {\n...\n...\n...\n}\n\nvar config Config = NewConfig()\n\ntype UpdateError struct {\n    uuid    string\n    status  int\n    message string\n}\n\n// So we can add our own methods to the RorClient struct\ntype RorClient struct {\n    rorclient.RorClient\n}\n\n// Constructs \nfunc NewRorClient(config config.Config) *RorClient {\n    transport := resttransport.NewRorHttpTransport(&amp;httpclient.HttpTransportClientConfig{\n        BaseURL:      config.RorUrl,\n        AuthProvider: httpauthprovider.NewNoAuthprovider(),\n        Version:      rorversion.NewRorVersion(config.RorVersion, config.RorCommit),\n        Role:         config.RorRole,\n    })\n\n    rorClient := RorClient{\n        *rorclient.NewRorClient(transport),\n    }\n\n    return &amp;rorClient\n}\n</code></pre>"},{"location":"components/clients/rorclient/getting-started/#converting-the-resource-to-the-ror-resource","title":"Converting the resource to the ROR resource","text":"Example <pre><code>package rorclient\n\n// Adds or updates the VMs in ROR\nfunc (r *RorClient) UpdateVms(ctx context.Context, vmResources []*rortypes.ResourceVirtualMachine) error {\n    set := rorresources.NewResourceSet()\n\n    names := []string{}\n    for _, vm := range vmResources {\n        names = append(names, vm.Name)\n        res := rorresources.NewRorResource(\"VirtualMachine\", \"general.ror.internal/v1alpha1\")\n\n        res.RorMeta.Ownerref = rorresourceowner.RorResourceOwnerReference{\n            Scope:   aclmodels.Acl2ScopeRor,\n            Subject: aclmodels.Acl2RorSubjectGlobal,\n        }\n\n        v5Uuid, err := virtualmachine.UuidV5FromCompositeId(vm.Id)\n        if err != nil {\n            return fmt.Errorf(\"could not get uuid from vm resource: %w\", err)\n        }\n\n        res.Metadata.UID = types.UID(v5Uuid.String())\n        res.RorMeta.Action = rortypes.K8sActionAdd\n        res.Metadata.Name = vm.Name\n        res.SetVirtualMachine(vm)\n        set.Add(res)\n    }\n\n    res, err := r.ResourceV2().Update(ctx, *set)\n}\n</code></pre>"},{"location":"components/clients/rorclient/getting-started/#adding-or-updating-using-the-ror-client","title":"Adding or updating using the ROR client","text":"Example <pre><code>package rorclient\n\n// Adds or updates the VMs in ROR\nfunc (r *RorClient) UpdateVms(ctx context.Context, vmResources []*rortypes.ResourceVirtualMachine) error {\n        res, err := r.ResourceV2().Update(ctx, *set)\n    if err != nil {\n        return fmt.Errorf(\"could not update vm, ROR returned: %w\", err)\n    }\n\n    var errors UpdateErrors\n    for uuid, response := range *&amp;res.Results {\n        if response.Status &gt; 299 {\n            error := UpdateError{\n                uuid:    uuid,\n                status:  response.Status,\n                message: response.Message,\n            }\n\n            errors.Errors = append(errors.Errors, error)\n        }\n    }\n\n    if len(errors.Errors) != 0 {\n        return errors\n    }\n\n    return nil\n}\n\n// Deletes VMs\nfunc (r *RorClient) DeleteVms(ctx context.Context, uuids []string) error {\n    for _, uid := range uuids {\n        del, err := r.ResourceV2().Delete(ctx, uid)\n        slog.Info(\"deleted vm\", \"info\", del)\n        if err != nil {\n            return fmt.Errorf(\"could not delete vm, ROR returned %w\", err)\n        }\n    }\n    return nil\n}\n</code></pre>"},{"location":"components/clients/rorclient/getting-started/#deleting-using-the-ror-client","title":"Deleting using the ROR client","text":"Example <pre><code>package rorclient\n\nfunc (r *RorClient) DeleteVms(ctx context.Context, uuids []string) error {\n    for _, uid := range uuids {\n        del, err := r.ResourceV2().Delete(ctx, uid)\n        slog.Info(\"deleted vm\", \"info\", del)\n        if err != nil {\n            return fmt.Errorf(\"could not delete vm, ROR returned %w\", err)\n        }\n    }\n    return nil\n}\n</code></pre>"},{"location":"components/core/","title":"Core Services","text":""},{"location":"components/core/#core-services","title":"Core Services","text":""},{"location":"components/core/#repositories","title":"Repositories","text":"<ul> <li>ROR</li> <li>ROR-API</li> <li>ROR-WEB</li> <li>ROR-WEBAPP</li> </ul>"},{"location":"components/core/#issue-boards","title":"Issue-boards:","text":"<ul> <li>ROR - issues-board</li> <li>ROR-API - issues-board</li> <li>ROR-WEB - issues-board</li> <li>ROR-WEBAPP - issues-board</li> </ul>"},{"location":"components/core/authentication/","title":"Authentication","text":""},{"location":"components/core/authentication/#authentication","title":"Authentication","text":"<p>The authentication stack consists of the following services:</p> <ul> <li>Dex</li> <li>OpenLDAP</li> </ul>"},{"location":"components/core/authentication/dex/","title":"Dex","text":""},{"location":"components/core/authentication/dex/#dex","title":"Dex","text":""},{"location":"components/core/authentication/openldap/","title":"OpenLDAP","text":""},{"location":"components/core/authentication/openldap/#openldap","title":"OpenLDAP","text":""},{"location":"components/core/cache/","title":"Redis","text":""},{"location":"components/core/cache/#redis","title":"Redis","text":""},{"location":"components/core/database/","title":"MongoDB","text":""},{"location":"components/core/database/#mongodb","title":"MongoDB","text":""},{"location":"components/core/database/mongo-express/","title":"Mongo Express","text":""},{"location":"components/core/database/mongo-express/#mongo-express","title":"Mongo Express","text":"<p>Mongo express is only available in the development environment.</p>"},{"location":"components/core/messagebus/","title":"Rabbit MQ","text":""},{"location":"components/core/messagebus/#rabbit-mq","title":"Rabbit MQ","text":""},{"location":"components/core/observability/","title":"Observability","text":""},{"location":"components/core/observability/#observability","title":"Observability","text":"<p>The observability stack consists of the following services:</p> <ul> <li>Jaeger</li> <li>OpenTelemtry</li> </ul>"},{"location":"components/core/observability/jaeger/","title":"Jaeger","text":""},{"location":"components/core/observability/jaeger/#jaeger","title":"Jaeger","text":""},{"location":"components/core/observability/opentelemtry/","title":"OpenTelemtry","text":""},{"location":"components/core/observability/opentelemtry/#opentelemtry","title":"OpenTelemtry","text":""},{"location":"components/core/ror/","title":"ROR","text":""},{"location":"components/core/ror/#ror","title":"ROR","text":"<p>ROR is a package repository that contain public packages used across the ROR eco-system. The ROR package itself does not offer any direct functionality to ROR.</p>"},{"location":"components/core/ror-api/","title":"ROR-API","text":""},{"location":"components/core/ror-api/#ror-api","title":"ROR-API","text":"<p>ROR-API is the API definition of the ROR-Ecosystem, any communication done through ROR involves the ROR-API in some way.</p> <p>ROR-API is a web API made with Golang and the Gin Web API framework.</p>"},{"location":"components/core/ror-api/#get-started","title":"Get started","text":"<p>For information on how to get started with ror-api see the relevant README.md</p>"},{"location":"components/core/ror-api/aclv2/","title":"ACLv2","text":""},{"location":"components/core/ror-api/aclv2/#aclv2","title":"ACLv2","text":""},{"location":"components/core/ror-api/aclv2/#scopesubject","title":"Scope/subject","text":"<p>Acl v2 implements an accessmodel in two layers, scope og subject.</p>"},{"location":"components/core/ror-api/aclv2/#scope","title":"Scope","text":"<p>Scope represent the extent of the right. eg. if you want to grant access to a cluster the scope is cluster.</p> <p>There is a global scope called ror that aplies to the whole system</p> <p>All scopes are represented by the enum type Acl2Scope.</p>"},{"location":"components/core/ror-api/aclv2/#subject","title":"Subject","text":"<p>Subject represent id of the resource the access applies to. Eg. if the scope is cluster the subject is a clusterid.</p> <p>If the scope is ror the subject is a group of subject eg cluster granting access to all clusters. The largest spanning subject is Acl2RorSubjectGlobal</p> <p>Valid subjects under the scope ror is defined in the const Acl2RorSubject</p> <p>Scopes are represented by the type Acl2Subject that represents a string.</p>"},{"location":"components/core/ror-api/aclv2/#validation","title":"Validation","text":"<p>Scopes can be validated with the method (s Acl2Scope) IsValid() bool</p> <p>Subjects can be validated against its coresponding scope with the method *(s Acl2Subject) HasValidScope(scope Acl2Scope) bool</p>"},{"location":"components/core/ror-api/aclv2/#query","title":"Query","text":"<p>The query to the acl v2 engine should be represented by the type AclV2QueryAccessScopeSubject</p> <p>It must be created with the factory <code>NewAclV2QueryAccessScopeSubject(scope any, subject any) AclV2QueryAccessScopeSubject</code> which implements type casting and validation of the query.</p>"},{"location":"components/core/ror-api/aclv2/#access","title":"Access","text":"<p>Access is defined by the type  AclV2ListItemAccess as five boolean values representing Read, Create, Update, Delete, Owner.</p> <p>The returnes accessobject can be queried with the methods representing the level of acces we want to check eg:</p> <pre><code>accessQuery := aclmodels.NewAclV2QueryAccessScopeSubject(aclmodels.Acl2ScopeRor, aclmodels.Acl2RorSubjectGlobal)\naccessObject := aclservice.CheckAccessByContextAclQuery(ctx, accessQuery)\nif !accessObject.Read {\n    c.JSON(http.StatusForbidden, \"403: No access\")\n    return\n}\n</code></pre>"},{"location":"components/core/ror-api/config-management/","title":"Config management","text":""},{"location":"components/core/ror-api/config-management/#config-management","title":"Config management","text":""},{"location":"components/core/ror-api/config-management/#mergestrategi","title":"Mergestrategi","text":""},{"location":"components/core/ror-web/","title":"ROR-WEB","text":""},{"location":"components/core/ror-web/#ror-web","title":"ROR-WEB","text":"<p>ROR-WEB currently has 2 versions</p> <ul> <li>ROR-WEBAPP written in Angularjs.</li> <li>ROR-WEB written in React.</li> </ul> <p>ROR-WEB is the one currently being actively developed and ROR-WEBAPP is in time to be decapricated.</p>"},{"location":"components/core/vault/","title":"Vault","text":""},{"location":"components/core/vault/#vault","title":"Vault","text":""},{"location":"components/distributables/","title":"Index","text":""},{"location":"components/distributables/ror-agent/","title":"ROR-Agent","text":""},{"location":"components/distributables/ror-agent/#ror-agent","title":"ROR-Agent","text":""},{"location":"components/distributables/ror-operator/","title":"ROR-Operator","text":""},{"location":"components/distributables/ror-operator/#ror-operator","title":"ROR-Operator","text":""},{"location":"components/distributables/ror-operator/#installation-flowchart","title":"Installation flowchart","text":""},{"location":"components/microservices/","title":"Index","text":""},{"location":"components/microservices/ror-ms-auth/","title":"ror-ms-auth","text":""},{"location":"components/microservices/ror-ms-auth/#ror-ms-auth","title":"ror-ms-auth","text":""},{"location":"components/microservices/ror-ms-slack/","title":"ror-ms-slack","text":""},{"location":"components/microservices/ror-ms-slack/#ror-ms-slack","title":"ror-ms-slack","text":""},{"location":"design/","title":"Principles","text":""},{"location":"design/#principles","title":"Principles","text":"<p>ROR's design philsophy is based around the following principles:</p> <ul> <li>Vendor agnostic<ul> <li>While ROR is not limited to have other resources implemented, the implementation has to be vender agnostic.</li> </ul> </li> <li>API first<ul> <li>The API is to be the core component in communication between system.</li> </ul> </li> </ul>"},{"location":"design/design/","title":"Components","text":""},{"location":"design/design/#components","title":"Components","text":""},{"location":"design/design/#production-components","title":"Production components","text":"Feature realization Reasoning Documentation Database MongoDB MongoDB Cache Valkey Valkey Message queue RabbitMQ Rabbit MQ Secrets vault Hashicorp Vault Hashicorp Vault OIDC Provider Dex OpenLDAP SSO OpenLDAP OpenLDAP Observability Jeager Jaeger Observability OpenTelemtry OpenTelemtry"},{"location":"design/design/#development-environment-components","title":"Development environment components","text":"Feature realization Reasoning Documentation Database MongoDB MongoDB Database browser Mongo Express Mongo Express Cache Valkey Valkey Message queue RabbitMQ Rabbit MQ Secrets vault Hashicorp Vault Hashicorp Vault OIDC Provider Dex OpenLDAP SSO OpenLDAP OpenLDAP Observability Jeager Jaeger Observability OpenTelemtry OpenTelemtry"},{"location":"design/designrecords/","title":"Index","text":""},{"location":"design/designrecords/react-framework/","title":"Architecture Decision Record: React framework for ROR Web GUI","text":""},{"location":"design/designrecords/react-framework/#architecture-decision-record-react-framework-for-ror-web-gui","title":"Architecture Decision Record: React framework for ROR Web GUI","text":""},{"location":"design/designrecords/react-framework/#summary","title":"Summary","text":""},{"location":"design/designrecords/react-framework/#issue","title":"Issue","text":"<p>We want to use a React framework to create our web application:   * We want to use React because it is easier to find people who know the framework   * We want to use a meta-framework that enables to do more heavy-lifting with simple configuration or conventions</p>"},{"location":"design/designrecords/react-framework/#decision","title":"Decision","text":"<p>Decided on React Router v7. Decision made by @patrickedqvist, @havardelnan and @rogerwesterbo.</p>"},{"location":"design/designrecords/react-framework/#status","title":"Status","text":"<p>Decided on React Router v7. If we are hindered by our choice the backup choice is Next.js.</p>"},{"location":"design/designrecords/react-framework/#details","title":"Details","text":"<p>Two choices needed to be made. One is which framework to choose and the other choice which meta-framework should be used. The first choice has already been decided to be React due it's much higher usage <sup>1</sup>. It will simply be easier to acquire talent for a framework many people know. That leaves choosing a meta-framework or some type of tooling the meet our needs listed below.</p>"},{"location":"design/designrecords/react-framework/#needs","title":"Needs","text":"<ul> <li>Support for running on node but preferably either on Bun or Deno</li> <li>Server-Side Rendering (SSR) out-of-the-box or with minimal configuration</li> <li>Routing</li> <li>Code-splitting capabilities</li> <li>Support for typescript</li> </ul>"},{"location":"design/designrecords/react-framework/#nice-to-haves","title":"Nice to haves","text":"<ul> <li>Configurable cache-mechanics</li> <li>Serverless support (not sure how to utilities it properly, discuss.)</li> <li>Support for telemetry</li> </ul>"},{"location":"design/designrecords/react-framework/#not-of-particular-interest","title":"Not of particular interest","text":"<ul> <li>Small client-side JS bundle size</li> <li>Can be dependent on JS to exist on the client machine</li> </ul>"},{"location":"design/designrecords/react-framework/#meta-frameworks","title":"Meta frameworks","text":"<p>These are some known meta frameworks and toolings that support React that we will compare to our needs and wishes. We also compare some features to highlight how the different frameworks has solved them, such as how data-fetching is done.</p> <ol> <li>Next.js</li> <li>Astro</li> <li>React Router v7</li> </ol> <p>Remix is not considered as React Router v7 has replaced it (https://remix.run/blog/incremental-path-to-react-19). Vite with SSR is not considered since it is a low-level API for framework developers, but React Router v7 is built on this technology. Rakkas.js is another framework that was on the radar but it is not production-ready at this moment.</p> Feature Next.js Astro React Router v7 Supports Node.js Yes Yes Yes Supports Bun and/or Deno runtime Yes Yes Unknown Server-side rendering Yes Yes Yes <sup>3</sup> Routing File-based File-based Config-based Code-Splitting By route Granular (Island-Architecture) By route Configurable cache-mechanics Yes <sup>2</sup> No Yes <sup>4</sup> Methods for data-fetching Standard async/await in with React Server Components Standard async/await in .astro files clientLoader, loader, clientAction, action POST request handling Yes No Yes Middleware Yes Yes Yes Telemetry Yes No No Support for Typescript Yes Yes Yes"},{"location":"design/designrecords/react-framework/#framework-differences","title":"Framework differences","text":"<p>While all these frameworks has a similar set of features there are architectural difference, they might have different levels of complexity for good and bad. In this section I try to highlight how the same set of features are solved differently.</p>"},{"location":"design/designrecords/react-framework/#server-side-rendering-ssr-and-data-fetching","title":"Server-side rendering (SSR) and data-fetching","text":""},{"location":"design/designrecords/react-framework/#nextjs","title":"Next.js","text":"<p>Next.js uses React Server Components per default. It enables the use of async and await inside if your component without any extra feature. You can also opt-out and use client-side data fetching for the places you want.</p> <p>Example </p><pre><code>import db from './database';\n\nasync function Note({id}) {\n    // NOTE: loads *during* render.\n    const note = await db.notes.get(id);\n    return (\n        &lt;div&gt;\n            &lt;Author id={note.authorId} /&gt;\n            &lt;p&gt;{note}&lt;/p&gt;\n        &lt;/div&gt;\n    );\n}\n\nasync function Author({id}) {\n    // NOTE: loads *after* Note,\n    // but is fast if data is co-located.\n    const author = await db.authors.get(id);\n    return &lt;span&gt;By: {author.name}&lt;/span&gt;;\n}\n</code></pre><p></p>"},{"location":"design/designrecords/react-framework/#astro","title":"Astro","text":"<p>The framework for content-driven websites. Astro has the possibility for using SSR but its speciality is generating static content. It follows an island-architecture approach where you create the main content as static but can create \"islands\" or \"regions\" where you can use one of the major client-side libraries (react, vue, svelte etc) to render an isolated interactive experience.</p> <p>Islands architecture works by rendering the majority of your page to fast, static HTML with smaller \u201cislands\u201d of JavaScript added when interactivity or personalization is needed on the page (an image carousel, for example). <sup>6</sup></p> <p>SSR is available but needs a runtime adapter to act as a server. Currently there are adapters for the popular JAM-stack hosting partners such as vercel and netlify. There is also a node adapter.</p> <p>Example </p><pre><code>---\nexport const prerender = false; // Not needed in configured 'server' mode\n\nimport { getProduct } from '../api';\n\nconst product = await getProduct(Astro.params.id);\n\n// No product found\nif (!product) {\n    return new Response(null, {\n        status: 404,\n        statusText: 'Not found'\n    });\n}\n\n// The product is no longer available\nif (!product.isAvailable) {\n    return Astro.redirect(\"/products\", 301);\n}\n\n---\n\n&lt;html&gt;\n\n&lt;!-- Page here... --&gt;\n\n&lt;/html&gt;\n</code></pre><p></p>"},{"location":"design/designrecords/react-framework/#react-router-v7","title":"React Router v7","text":"<p>Version 7 of React Router is the next iteration of Remix. Remix was the best alternative to Next.js offering much of the same features. React Router uses some different namespaced methods for doing server-side fetching and rendering. In the example below it uses the function \"loader\" to fetch the data on the server. There are then functions for doing posting (usually used together with a form) and both fetching and posting on the client side.</p> <p>Example </p><pre><code>// route(\"products/:pid\", \"./product.tsx\");\nimport type { Route } from \"./+types/product\";\nimport { fakeDb } from \"../db\";\n\nexport async function loader({ params }: Route.LoaderArgs) {\n  const product = await fakeDb.getProduct(params.pid);\n  return product;\n}\n\nexport default function Product({\n  loaderData,\n}: Route.ComponentProps) {\n  const { name, description } = loaderData;\n  return (\n    &lt;div&gt;\n      &lt;h1&gt;{name}&lt;/h1&gt;\n      &lt;p&gt;{description}&lt;/p&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre><p></p> <p>The other big difference from the other frameworks is that uses a configuration for the routing rather than a file-based approach, although there is a possibility to implement file-based routing as well or even mix the two.</p> <p>Example </p><pre><code>import {\n  type RouteConfig,\n  route,\n  index,\n  layout,\n  prefix,\n} from \"@react-router/dev/routes\";\n\nexport default [\n  index(\"./home.tsx\"),\n  route(\"about\", \"./about.tsx\"),\n\n  layout(\"./auth/layout.tsx\", [\n    route(\"login\", \"./auth/login.tsx\"),\n    route(\"register\", \"./auth/register.tsx\"),\n  ]),\n\n  ...prefix(\"concerts\", [\n    index(\"./concerts/home.tsx\"),\n    route(\":city\", \"./concerts/city.tsx\"),\n    route(\"trending\", \"./concerts/trending.tsx\"),\n  ]),\n] satisfies RouteConfig;\n</code></pre><p></p>"},{"location":"design/designrecords/react-framework/#ror-considerations","title":"ROR considerations","text":"<p>Since Astro is primarily meant for content-driven websites I think it's safe to assume that what we want to build diverge from their intention and ambition. We are looking for a framework that best fits building a data-heavy dashboard application. So I will simply write my pros and cons for Next.js and React Router v7.</p>"},{"location":"design/designrecords/react-framework/#nextjs-pros","title":"Next.js Pros","text":"<ul> <li>Leans heavy on React v19 API and the two frameworks are constantly in dialog pushing React forward. If you learn and keep updated on React there are less boilerplate to think about for Next.js</li> <li>The most popular option - easy to find compatible libraries and people who have experience with it.</li> <li>Mature framework means flexibility and extendability without offering stability. Next.js offers many different features that are battle-proven.</li> </ul>"},{"location":"design/designrecords/react-framework/#nextjs-cons","title":"Next.js Cons","text":"<ul> <li>Opiniated, it for instance builds on extending certain built-in standards. There for there are somethings that are Next.js specific that there are minimal documentation on.</li> <li>Vendor lock-in. Vercel is the company behind Next.js which mainly earns money from their hosting solution. Next.js and Vercels hosting solution is tightly coupled meaning that other alternatives does make full use out of the capabilities.</li> </ul>"},{"location":"design/designrecords/react-framework/#react-router-pros","title":"React Router Pros","text":"<ul> <li>Very flexible routing could allow for an easier file-organization</li> <li>Familiarity - many people who have worked with React Single-Page-Applications have used React Router v6 or older versions and therefore there might be less of a hurdle to work with the framework.</li> <li>React Router uses the native Request and Response API making it easier for everyone to rely on MDN for documentation.</li> <li>Uses Vite under the hood which means it can use other peoples work to grow or for us to modify certain behaviour.</li> </ul>"},{"location":"design/designrecords/react-framework/#react-router-cons","title":"React Router Cons","text":"<ul> <li>Excessive complexity, one of the pain points for many developers when it comes to meta-frameworks. React Router uses some of their own functionality for data-fetching, inherited from Remix. Since React 19 there is the question if these are really necessary or if the framework should solely rely on what is possible with for instance server actions and functions.</li> <li>React-Router in its current state does not extend much beyond routing and data-fetching. Meaning certain features can be harder to implement since it means configuring or extending Vite.</li> </ul> <ol> <li> <p>Source https://share.stateofjs.com/share/prerendered?localeId=en-US&amp;surveyId=state_of_js&amp;editionId=js2024&amp;blockId=front_end_frameworks_ratios&amp;params=&amp;sectionId=libraries&amp;subSectionId=front_end_frameworks ![[Front End Frameworks Ratios.png]]\u00a0\u21a9</p> </li> <li> <p>https://nextjs.org/docs/app/building-your-application/caching \u21a9</p> </li> <li> <p>They say it is supported but \"Server side rendering requires a deployment that supports it.\" without any further explanation. https://reactrouter.com/start/framework/rendering. Probably means you have setup your own server without guidance from the framework.\u00a0\u21a9</p> </li> <li> <p>By using custom Cache-Control headers on each route, note that it is not granular for different type of requests.\u00a0\u21a9</p> </li> <li> <p>SolidStart is built on top of https://nitro.build/ which has granular cache control.\u00a0\u21a9</p> </li> <li> <p>https://docs.astro.build/en/concepts/islands/ \u21a9</p> </li> </ol>"},{"location":"design/resources/","title":"Resources","text":""},{"location":"design/resources/#resources","title":"Resources","text":""},{"location":"design/resources/#quick-words","title":"Quick words","text":""},{"location":"design/resources/#v1","title":"v1","text":"<p>ROR resource v1 is deprecated. It was not very modular and there was a lot of manual steps to create a new resource. Each type was its own full definition with very little reuse of code between them.</p>"},{"location":"design/resources/#v2","title":"v2","text":"<p>ROR resource v2 is to wrap all resources in a common resource type and generate code to work with each kind.</p>"},{"location":"design/resources/#what-is-a-resource","title":"What is a resource","text":"<p>A ROR-Resource (resource), is a structured piece of data with some common metadata attached. Each resource must be explicitly defined in the ROR resource package. This means that if you want to create a new resource you must submit a Pull Request to the ROR repo. At this time resources are not built to be registered at runtime.</p> <p>One of RORs core philosophies is vendor agnosticism. This means that if you are trying to add a resource for for example Azure virtual machines, you should generalize the resource so that it can be used for VMware virtual machines and so on. This keeps the number of resources down, and also makes it easier to swap vendor in the future.</p>"},{"location":"design/resources/#resource-queries","title":"Resource queries","text":"<p>TODO</p>"},{"location":"design/resources/#resource-sets","title":"Resource sets","text":"<p>TODO</p>"},{"location":"design/resources/#creating-a-new-resource","title":"Creating a new resource","text":"<p>To create a new resource see our development guide here</p>"},{"location":"design/roadmap/","title":"Roadmap","text":""},{"location":"design/roadmap/#roadmap","title":"Roadmap","text":""},{"location":"design/roadmap/#release","title":"Release","text":"function milestone done description create cluster 1.0 90% Create cluster from sclusterspec, allows integration with other teams managementssolution. upgrade/scale cluster 1.0 20% Upgrade/scal cluster from changing sclusterspec, allows integration with other teams managementssolution. decomission cluster 1.0 20% Decomission cluster, allows integration with other teams managementssolution."},{"location":"design/roadmap/#operate","title":"Operate","text":"function milestone done description cluster inventory 1.0 Collect basic clustrerinformation cluster status 1.0 Calculate healthscore for the cluster based on established rules. Configuration management 1.0 - Dex integrations 1.0 Automatic provisioning of dex clientid and clientsecrets - tooling-config 1.0 90% Full config of tooling from ROR - Authorization 1.0 Configure access to clusters from ROR"},{"location":"design/roadmap/#report","title":"Report","text":"function milestone done description - Metrics 1.0 Gather basic cluster metrics - Security scan 1.0 Run scans of cluster components like config, images certificates..."},{"location":"development/","title":"Development","text":""},{"location":"development/#development","title":"Development","text":"<ul> <li>For setting up your development environment, see here for more details.</li> <li>For using the generator, see here for more details.</li> </ul>"},{"location":"development/default-accounts/","title":"Default Accounts","text":""},{"location":"development/default-accounts/#default-accounts","title":"Default Accounts","text":"<p>Open your favorite browser, and go to http://localhost:11000 Log in with any of these accounts:</p>"},{"location":"development/default-accounts/#ror-accounts","title":"ROR Accounts","text":"Title Username Password super admin <code>superadmin@ror.dev</code> <code>S3cret!</code> read only admin <code>readadmin@ror.dev</code> <code>S3cret!</code> developer 1 <code>dev1@ror.dev</code> <code>S3cret!</code> developer 2 <code>dev2@ror.dev</code> <code>S3cret!</code>"},{"location":"development/default-accounts/#services","title":"Services","text":"Service Username Password MongoDB <code>someone</code> <code>S3cret!</code> Mongo-Express <code>test</code> <code>S3cr3t</code> RabbitMQ <code>admin</code> <code>S3cret!</code> vault <code>token</code> <code>S3cret!</code>"},{"location":"development/default-urls/","title":"URLs","text":""},{"location":"development/default-urls/#urls","title":"URLs","text":"Service What Url ReadMe link Comment DEX Authentication www: http://localhost:5556, grpc api: http://localhost:5557 dex doc docker hub Reachable from inside and outside of docker Openldap Mocking users http://localhost:389 MongoDB Document database mongodb://localhost:27017 Mongo-Express Gui for document base http://localhost:8081 RabbitMQ Message bus GUI: http://localhost:15672, amqp port: localhost:5672 Vault Secrets handling GUI: http://localhost:8200 Valkey Cache GUI: http://localhost:6379"},{"location":"development/default-urls/#ror-services","title":"ROR services","text":"Service What Url Port ReadMe link Comment ROR-Api Api http://localhost:10000 8080 ror-api ROR-WebApp Web http://localhost:11000 8090 ror-webapp ROR-Agent K8s Agent http://localhost:8100 8100 ror-agent Not run by docker-compose"},{"location":"development/docker/","title":"Installation of Docker","text":""},{"location":"development/docker/#installation-of-docker","title":"Installation of Docker","text":""},{"location":"development/docker/#linux","title":"Linux","text":"<p>Installation steps for Linux: https://docs.docker.com/engine/install Recommended post-installation steps: https://docs.docker.com/engine/install/linux-postinstall/</p>"},{"location":"development/docker/#fedora","title":"Fedora","text":"Fedora  ### Installations:  <pre><code>sudo dnf -y install dnf-plugins-core\nsudo dnf-3 config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo\n</code></pre>  :warning: if you receive errors like this, you might have an old Docker installation already installed:  <pre><code>- package docker-ce-3:27.3.1-1.fc40.x86_64 from docker-ce-stable conflicts with docker provided by moby-engine-24.0.5-4.fc40.x86_64 from fedora\n- package moby-engine-24.0.5-4.fc40.x86_64 from fedora conflicts with docker-ce provided by docker-ce-3:27.3.1-1.fc40.x86_64 from docker-ce-stable\n</code></pre>  #### Install the Docker Engine  <pre><code>sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre>  #### Start the Docker engine  <pre><code>sudo systemctl enable --now docker\n</code></pre>  #### (Optional) Install Docker auto-complete  https://docs.docker.com/engine/cli/completion/  #### (Optional) Test the docker installation  <pre><code>sudo docker run hello-world\n</code></pre>  #### Manage Dockker as a non-root  Doc reference: https://docs.docker.com/engine/install/linux-postinstall/  #### Create the docker group.  <pre><code>sudo groupadd docker\n</code></pre>  #### Add your user to the docker group.  <pre><code>sudo usermod -aG docker $USER\n</code></pre>  Log out and log back in so that your group membership is re-evaluated. :warning: If you're running Linux in a virtual machine, it may be necessary to restart the virtual machine for changes to take effect.  #### Verify  <pre><code>docker run hello-world\n</code></pre>"},{"location":"development/docker/#windows","title":"Windows","text":"<p>https://learn.microsoft.com/en-us/windows/wsl/systemd</p> <p>TODO</p>"},{"location":"development/endpoints/","title":"Endpoints","text":""},{"location":"development/endpoints/#endpoints","title":"Endpoints","text":"Service What Url ReadMe link Comment DEX Authentication www: http://localhost:5556, grpc api: http://localhost:5557 dex doc docker hub Reachable from inside and outside of docker Openldap Mocking users http://localhost:389 MongoDB Document database mongodb://localhost:27017 Mongo-Express Gui for document base http://localhost:8081 RabbitMQ Message bus GUI: http://localhost:15672, amqp port: localhost:5672 Vault Secrets handling GUI: http://localhost:8200 Valkey Cache GUI: http://localhost:6379"},{"location":"development/guideline/","title":"Guidelines","text":""},{"location":"development/guideline/#guidelines","title":"Guidelines","text":"<ul> <li>For development on new resources within ROR see here for more details.</li> </ul>"},{"location":"development/known-issues/","title":"Known issues","text":""},{"location":"development/known-issues/#known-issues","title":"Known issues","text":""},{"location":"development/known-issues/#systems","title":"Systems","text":""},{"location":"development/known-issues/#mongodb","title":"MongoDB","text":"Error message cause potential solution git issue <code>(RoleNotFound) Could not find role: roleRorApi@nhn-ror</code> mongo-init.js did not run stop r.sh and run <code>docker compose down &amp;&amp; docker system prune -a &amp;&amp; r.sh</code> - <code>/usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*</code> mongo-init.js did not run check the permissions on hacks/data/docker-compose/mongodb/entrypoint is sufficient (273)[https://github.com/NorskHelsenett/ror/issues/273]"},{"location":"development/repos/","title":"Setting up repositories","text":""},{"location":"development/repos/#setting-up-repositories","title":"Setting up repositories","text":"<p>To ease the development on any core components of (ROR)[../../components/core/index.md] it is highly recommended to setup a Go workspace. For more information on Go workspaces see (here)[https://go.dev/doc/tutorial/workspaces].</p>"},{"location":"development/repos/#prerequisites","title":"Prerequisites","text":"<ul> <li>Golang SDK (For debugging and changing) https://go.dev</li> </ul>"},{"location":"development/repos/#short-version","title":"Short version","text":"<p>Make a directory to keep any related repositories to the ROR development. Avoid mixing projects not related to ROR out of this repository, as Go workspaces and react weirdly to that. The directory name is not important but keep it sensible.</p> <p>```bash .copy mkdir ror-ws # short for ror-workspace </p><pre><code>Copy each repository into this workspace folder.\n\n```bash .copy\ngit clone git@github.com:NorskHelsenett/ror.git\n</code></pre><p></p> <p>```bash .copy git clone git@github.com:NorskHelsenett/ror-api.git </p><pre><code>```bash .copy\ngit clone git@github.com:NorskHelsenett/ror-web.git\n</code></pre><p></p>"},{"location":"development/repos/#creating-the-workspace","title":"Creating the workspace","text":"<p>Create the workspace by using to <code>go work init</code> command on one of the repositories.</p> <p>```bash .copy go work init ./ror </p><pre><code>Then add the other repositories.\n\n```bash .copy\ngo work use  ./ror-api\n</code></pre><p></p> <p><code>bash .copy go work use  ./ror-web</code></p> <p>Now you repositories are ready for you development.</p>"},{"location":"development/setup/","title":"Setup","text":""},{"location":"development/setup/#setup","title":"Setup","text":""},{"location":"development/setup/#prerequisites","title":"Prerequisites","text":""},{"location":"development/setup/#mandatory","title":"Mandatory","text":"<ul> <li>A Linux distro or WSL2 for Windows</li> <li>Docker runtime<ul> <li>Docker CE: https://docs.docker.com/engine/install/</li> <li>WSL2 tips: https://learn.microsoft.com/en-us/windows/wsl/systemd</li> </ul> </li> <li>Golang SDK (For coding, debugging, and testing) https://go.dev</li> <li>ROR API: https://github.com/NorskHelsenett/ror-api</li> </ul>"},{"location":"development/setup/#optional","title":"Optional","text":"<p>If developing on the frontend the frontend repository is required:</p> <ul> <li>ROR Web: https://github.com/NorskHelsenett/ror-webapp</li> </ul> <p>New version:</p> <ul> <li>ROR Web: https://github.com/NorskHelsenett/ror-web</li> </ul> <p>Useful for spinning up the development environment:</p> <ul> <li>Docker Desktop (https://www.docker.com/products/docker-desktop/)</li> </ul> <p>For kubernetes specific things:</p> <ul> <li>Talosctl (https://www.talos.dev/v1.8/introduction/quickstart/)</li> <li>Kind (https://kind.sigs.k8s.io)</li> <li>K3d (https://k3d.io/stable/)</li> </ul> <p>For running documentation with mkdocs:</p> <ul> <li>Python</li> </ul> <p>For working on the ror Agent:</p> <ul> <li>RO Agent: https://github.com/NorskHelsenett/ror-agent</li> </ul>"},{"location":"development/setup/#hardware-requirements","title":"Hardware requirements:","text":"Recommendations CPU Memory Minimum 2 16GB Recommended 4 32GB"},{"location":"development/setup/#setting-up-you-repositories","title":"Setting up you repositories","text":"<p>To develop on ROR it is highly recommended to setup a Go Workspace with all relevant projects.</p> <p>See here for instructions.</p>"},{"location":"development/setup/#install-docker","title":"Install docker","text":"<p>To run the development environment Docker is required.</p> <p>See here for instructions.</p>"},{"location":"development/setup/#starting-the-environment","title":"Starting the environment","text":"<p>For instructions on how to start the environment see the ror-api README.md for instructions.</p>"},{"location":"development/setup/#ror-web","title":"ROR WEB","text":"<p>For instructions on how to start the webapp see the ror-web README.md for instructions.</p>"},{"location":"development/setup/#swagger","title":"Swagger","text":"<p>To see swagger for ROR Api, go to http://localhost:10000/swagger/index.html</p>"},{"location":"development/setup/#core-infrastructure","title":"Core infrastructure","text":"<p>For default urls see here.</p>"},{"location":"development/setup/#default-users","title":"Default users","text":"<p>For default users see here.</p>"},{"location":"development/setup/#known-issues","title":"Known issues","text":"<p>See Known-issues</p>"},{"location":"development/setup/#documentation","title":"Documentation","text":"<p>We pull documentation from code using some go package. Thus all functions should be annotated with a comment describing its use and any caveats. We keep system documentation in <code>cmd/docs/</code>, some files are copied in from .md files located in other parts of the repo using the <code>cmd/docs/collectdocs.sh</code> script. If you see any documentation that is out of date or wrong, please update it.</p>"},{"location":"development/generator/","title":"Code generator","text":""},{"location":"development/generator/#code-generator","title":"Code generator","text":""},{"location":"development/generator/#what-is-it","title":"What is it?","text":"<p>The code generator uses (Go templating)[https://pkg.go.dev/html/template] to generate code based on a minimum required code and templates to</p>"},{"location":"development/generator/#where-is-it-used","title":"Where is it used?","text":""},{"location":"development/generator/#v1","title":"v1","text":"<p>For v1 resources (which you should NOT be adding new features to) it uses these templates:</p> <p>```.bash .copy pkg/apicontracts/apiresourcecontracts/resource_models_generated.go.tmpl pkg/apicontracts/apiresourcecontracts/resource_models_methods_generated.go.tmpl </p><pre><code>## v2\n\nFor v2 resources it uses these templates:\n\n```.bash .copy\npkg/rorresources/fromstruct.go.tmpl\npkg/rorresources/resource.go.tmpl\npkg/rorresources/rorkubernetes/k8s.go.tmpl\npkg/rorresources/rorkubernetes/k8s_test.go.tmpl\npkg/rorresources/rorkubernetes/k8s_new.go.tmpl\npkg/rorresources/rorkubernetes/resource_interfaces.go.tmpl\npkg/rorresources/rorkubernetes/resourcemodels_methods.go.tmpl\npkg/rorresources/rortypes/resource_models_input_filter.go.tmpl\n</code></pre><p></p>"},{"location":"development/generator/#typescript","title":"TypeScript","text":"<p>TypeScript code is generated based on the Go struct data in the previous mentioned areas. The resulting code can be found here:</p> <p><code>.bash .copy typescript/models/resources.ts</code></p>"},{"location":"development/generator/#how-do-you-use-it","title":"How do you use it?","text":"<p>On more details on how to use the generator, see (here)[./using-generator.md].</p>"},{"location":"development/generator/resources/","title":"Resources","text":""},{"location":"development/generator/resources/#resources","title":"Resources","text":"<p>This section will take you through the process of creating a new v2 resource definition.</p>"},{"location":"development/generator/resources/#prerequisites","title":"Prerequisites","text":"<ul> <li>Good knowledge about the resource you're planning to implement</li> <li>Golang SDK: https://go.dev</li> <li>Understanding of our philosophy</li> </ul>"},{"location":"development/generator/resources/#optional","title":"Optional","text":"<ul> <li>A clear picture of what you want to implement and how go generalize it</li> </ul>"},{"location":"development/generator/resources/#general-information","title":"General information","text":"<p>When creating a new resource, editing, or deleting an existing resource for ROR the generator MUST be ran, this is required for amongst other things to update the TypeScript types.</p>"},{"location":"development/generator/resources/#getting-started","title":"Getting started","text":""},{"location":"development/generator/resources/#cloning-the-repository","title":"Cloning the repository","text":"<p>To start with you need to first setup your repositories ready for development. For how to do that please see here</p>"},{"location":"development/generator/resources/#creating-the-base-resource-files","title":"Creating the base resource files","text":""},{"location":"development/generator/resources/#create-the-resource-definition","title":"Create the resource definition","text":"<ol> <li>Creating it at:</li> </ol> <pre><code>ror/pkg/rorresources/rortypes\n</code></pre> <p>with the format:</p> <pre><code>resourcedef_&lt;resourceName&gt;.go\n</code></pre> <ol> <li>When creating this file the following rule must be followed:<ul> <li>The package name is <code>rortypes</code></li> <li>The structs all begin with <code>Resource</code> resulting your type to be <code>Resource&lt;YourResourceName&gt;</code></li> <li>Your main struct should contain a <code>Spec</code> and a <code>Status</code> field</li> <li>The <code>Spec</code> is the desired state, while <code>Status</code> is observed state, more about that further down.</li> </ul> </li> </ol> <p>An example of a resourcedef:</p> <pre><code>package rortypes\n\ntype ResourceVirtualMachine struct {\n        Id     string                       `json:\"id\"`\n        Name   string                       `json:\"name\"`\n        Spec   ResourceVirtualMachineSpec   `json:\"spec\"`\n        Status ResourceVirtualMachineStatus `json:\"status\"`\n}\n\ntype ResourceVirtualMachineSpec struct {\n        Cpu             ResourceVirtualMachineCpuSpec             `json:\"cpu\"`\n        Tags            []ResourceVirtualMachineTagSpec           `json:\"tags\"`\n        Disks           []ResourceVirtualMachineDiskSpec          `json:\"disks\"`\n        Memory          ResourceVirtualMachineMemorySpec          `json:\"memory\"`\n        Networks        []ResourceVirtualMachineNetworkSpec       `json:\"networks\"`\n        OperatingSystem ResourceVirtualMachineOperatingSystemSpec `json:\"operatingSystem\"`\n}\n\ntype ResourceVirtualMachineStatus struct {\n        Cpu             ResourceVirtualMachineCpuStatus             `json:\"cpu\"`\n        Disks           []ResourceVirtualMachineDiskStatus          `json:\"disks\"`\n        Memory          ResourceVirtualMachineMemoryStatus          `json:\"memory\"`\n        Networks        []ResourceVirtualMachineNetworkStatus       `json:\"networks\"`\n        OperatingSystem ResourceVirtualMachineOperatingSystemStatus `json:\"operatingSystem\"`\n}\n.\n.\n.\n</code></pre> <p>Note that JSON tags have to be in camel case, as the generator converts the Go structs to TypeScript, which does not support field names with hyphens.</p>"},{"location":"development/generator/resources/#spec","title":"Spec","text":"<p>Spec will be what we desire the configuration to be for when we wish to change something, like cpu, disk, or memory for the example above. Any parameter within here it is expected we're allowed to change if change from ROR is implemented.</p> <p>If the resource is read-only, the Spec field is not necessary to implement.</p>"},{"location":"development/generator/resources/#status","title":"Status","text":"<p>Status will be what we observe about this resource, like ids, the current cpu, disk, or memory for the example above.</p>"},{"location":"development/generator/resources/#create-the-resource_input_filter-definition","title":"Create the resource_input_filter definition","text":"<p>The resource_input_filter runs on import on that type, it can be used to censor, anonymize, remove, or change data before import.</p> <p>While it has to be defined on every type, generally we create it and return nil for no action.</p> <ol> <li>Create it at:</li> </ol> <pre><code>ror/pkg/rorresources/rortypes\n</code></pre> <p>with the format:</p> <pre><code>resouce_input_filter&lt;resourceName&gt;.go\n</code></pre> <ol> <li>Which should contain something to this example with  swapped out with your core struct:</li> </ol> <pre><code>package rortypes\n\n// (r *&lt;ResourceName&gt;) ApplyInputFilter Applies the input filter to the resource\nfunc (r *&lt;ResourceName&gt;) ApplyInputFilter(cr *CommonResource) error {\n        return nil\n}\n</code></pre>"},{"location":"development/generator/resources/#ror-definitions","title":"ROR definitions","text":"<ol> <li>Go to:</li> </ol> <pre><code>ror/pkg/rorresources/rordefs\n</code></pre> <ol> <li>And edit defs.go</li> <li>On the top const definition, add your new agent in the format:</li> </ol> <pre><code>ApiResoureType&lt;Name&gt; ApiReesourceType = \"&lt;AgentName&gt;\"\n</code></pre> <ol> <li>And at the near bottom at at to the Resroucedefs slice:</li> </ol> <pre><code>{\n        TypeMeta: metav1.TypeMeta{\n                Kind:       \"&lt;Name\",\n                APIVersion: \"&lt;Version of your choice&gt;\",\n        },\n        Plural:     \"&lt;Plural of name&gt;\",\n        Namespaced: false,\n        Types:      []ApiResourceType{&lt;Type&gt;},\n},\n</code></pre> <p>an example of a resource definition:</p> <pre><code>{\n    TypeMeta: metav1.TypeMeta{\n        Kind:       \"VirtualMachine\",\n        APIVersion: \"general.ror.internal/v1alpha1\",\n    },\n    Plural:     \"VirtualMachines\",\n    Namespaced: false,\n    Types:      []ApiResourceType{ApiResourceTypeVmAgent},\n    Versions:   []ApiVersions{ApiVersionV1, ApiVersionV2},\n}\n</code></pre>"},{"location":"development/generator/resources/#typemeta","title":"TypeMeta","text":"<p>TypeMeta is a standard Kubernetes API metadata struct that specifies the resource <code>Kind</code> and <code>APIVersion</code>. In this context it identifies what type of resource this definition represents and which API group/version it belongs to.</p>"},{"location":"development/generator/resources/#plural","title":"Plural","text":"<p>Used to generate functions that fetch multiple resources of a kind</p>"},{"location":"development/generator/resources/#namespaced","title":"Namespaced","text":"<p>TODO</p>"},{"location":"development/generator/resources/#types","title":"Types","text":"<p>TODO</p>"},{"location":"development/generator/resources/#versions","title":"Versions","text":"<p>Used by the generator to fetch resource definitions of a specific version. Best practice is to set this to the highest version, unless you specifically need to support a lower version for some reason.</p>"},{"location":"development/generator/using-generator/","title":"using generator","text":""},{"location":"development/generator/using-generator/#using-generator","title":"using generator","text":""},{"location":"development/generator/using-generator/#running-the-generator","title":"Running the generator","text":"<ol> <li>Go to the root folder of ROR</li> <li>Run the following command:</li> </ol> <pre><code>go run cmd/generator/main.go\n</code></pre> <ol> <li>And you're done, commit to the branch and make a pull/merge request.</li> </ol>"},{"location":"development/makerfile/","title":"Makerfile","text":""},{"location":"development/makerfile/#makerfile","title":"Makerfile","text":"<p>In this project there's a makerfile available in every repository is used to simplify tasks related to development and building the appication.</p> <p>For more information around makerfiles see her</p>"},{"location":"development/makerfile/#quick-guide","title":"Quick guide","text":"<p>For those unfamiliar with makerfiles, here's a quick guide how to use it.</p> <p>First make sure make is installed, usually comes with the Linux OS, if not install it using your preferred package manager.</p> <p>To use makerfile you use the following format:</p> <p>```.bash .copy make  </p><pre><code>```.bash .copy\nmake help\n</code></pre><p></p> <p>For what functionality is available see the README of the relevant project for more information.</p> <p>ror ror-api</p>"},{"location":"documentation/","title":"ROR Docs","text":""},{"location":"documentation/#ror-docs","title":"ROR Docs","text":"<p>ROR Docs is an mkdocs-material page that generates automatically when changes are pushed to <code>docs/*</code> and <code>mkdocs.yaml</code>.</p> <p><code>mkdocs.yaml</code> holds the configuration and the mapping of files that's available under <code>docs/</code>.</p> <p>To run docs locally you'll need python installed and run the following in the root of the repository:</p> <pre><code>pip install -r mkdocs-requirements.txt\nmkdocs serve\n</code></pre>"},{"location":"documentation/#mapping-of-files","title":"Mapping of files","text":"<p>Under <code>map:</code> in <code>mkdocs.yaml</code> it defines the header, articles and under articles based on the indentation.</p> <p>Example:</p> <pre><code>nav:\n    - ROR:\n          - index.md\n          - components.md\n          - design.md\n          - getting-started.md\n    - Clients:\n          - ror-admin:\n                - ror-admin/index.md\n          - ror-cli:\n                - ror-cli/index.md\n                - ror-cli/auth-flow.md\n</code></pre>"},{"location":"documentation/guidelines/","title":"Guidelines","text":""},{"location":"documentation/mkdocs/","title":"Mkdocs","text":""},{"location":"faq/","title":"FAQ - Frequently Asked Questions","text":""},{"location":"faq/#faq-frequently-asked-questions","title":"FAQ - Frequently Asked Questions","text":""},{"location":"faq/#q-i-want-highly-specific-feature-x-from-y-how-do-i-get-this-implemented","title":"Q: I want highly specific feature X from Y, how do I get this implemented?","text":"<p>As ROR's goal is to be vendor-agnostic, for this to be implemented the feature has to be implemented in a generic way. If that's not possible ROR might not be the product for your problem.</p>"},{"location":"faq/#q-i-want-x-to-be-implemented-how-do-i-go-forward","title":"Q: I want X to be implemented, how do I go forward?","text":"<p>First you create a \"Feature Request\" (found in the issue tracker under the \"Feature Request\" template) and provide a clear description of the problem and the feature you would like to see implemented.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#installation","title":"Installation","text":"<p>To install ROR in a kubernetes cluster, there's an helm chart available at here for deployment.</p>"},{"location":"trivia/","title":"ROR Trivia","text":""},{"location":"trivia/#ror-trivia","title":"ROR Trivia","text":"<p>What does ROR mean</p> <pre><code>\"ror\" is the Norwegian word for rudder.\nA rudder is a control device where a blade or a fin is attached to a shaft.\nThis is used to change the direction of a force in a fluid or gas.\nRudders are most commonly used on boats, ships, and aircraft.\n</code></pre>"}]}